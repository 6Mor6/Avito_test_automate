# TESTCASES: E2E-тестирование таск-трекера (Selenium + pytest + Allure)

## 1. Создание задачи
**Цель:** Убедиться, что пользователь может создать задачу через форму, и она корректно отображается в списке после перезагрузки страницы.

**Предусловия:**
- Пользователь авторизован.
- Сайт доступен по URL: `https://avito-tech-internship-psi.vercel.app/`.

**Шаги:**
1. Открыть главную страницу таск-трекера.
2. Дождаться появления кнопки "Создать задачу" и кликнуть по ней.
3. Ввести в поле "Название" — `"E2E Test last 123"`.
4. Ввести в поле "Описание" — `"Тетсовое описание"`.
5. Выбрать проект — `"Рефакторинг API"` (через выпадающий список).
6. Выбрать приоритет — `"Low"` (через выпадающий список).
7. Выбрать исполнителя — `"Максим Орлов"` (через выпадающий список).
8. Нажать кнопку "Создать" в форме.
9. Перезагрузить страницу.
10. Прокрутить страницу до самого низа дважды с задержкой 3 и 5 секунд (для загрузки lazy-loaded задач).

**Ожидаемый результат:**
- Задача отображается в списке задач.
- Последняя задача в списке имеет название `"E2E Test last 123"`.
- У задачи есть все указанные поля: описание, проект, приоритет, исполнитель.

**Проверка в тесте:**
- `assert last_task_title == "E2E Test last 123"`  
  (получено через `get_last_created_task_title()` — выбор последнего `h6.MuiTypography-subtitle1` в `.MuiPaper-root`)

**Прикрепляемые артефакты:**
- Скриншот после создания: `E2E_Test_last_123_created.png`
- Скриншот после перезагрузки и прокрутки: `E2E_Test_last_123_after_reload_and_scroll.png`

---

## 2. Открытие карточки задачи
**Цель:** Убедиться, что при клике на задачу в списке открывается форма редактирования с корректно заполненными полями.

**Предусловия:**
- Задача `"E2E Test last"` существует в списке (создана в предыдущем тесте или вручную).

**Шаги:**
1. Открыть главную страницу таск-трекера.
2. Прокрутить страницу до самого низа дважды (с задержками 3 и 5 секунд) для загрузки всех задач (lazy load).
3. Найти задачу с заголовком `"E2E Test last"` в списке (локатор: `//h6[contains(@class, 'MuiTypography-subtitle1') and normalize-space(text()) = 'E2E Test last']`).
4. Убедиться, что элемент кликабелен.
5. Прокрутить элемент в центр экрана с помощью `scrollIntoView({block: 'center', behavior: 'smooth'})`.
6. Кликнуть по заголовку задачи.
7. Дождаться появления элемента `<h5>Редактирование задачи</h5>`.
8. Дождаться загрузки полей формы:  
   - Название: `input[type='text']` под меткой "Название"  
   - Описание: `textarea` под меткой "Описание"  
   - Проект: `div[role='combobox']` под меткой "Проект"  
   - Приоритет: `div[role='combobox']` под меткой "Приоритет"  
   - Исполнитель: `div[role='combobox']` под меткой "Исполнитель"
9. Прочитать значения всех полей.

**Ожидаемый результат:**
- Форма редактирования открылась.
- Значения полей совпадают с данными, указанными при создании задачи:
  - Название: `"E2E Test last"`
  - Описание: `"Тетсовое описание"`
  - Проект: `"Рефакторинг API"`
  - Приоритет: `"Low"`
  - Исполнитель: `"Максим Орлов"`

**Проверка в тесте:**
```python
assert title == "E2E Test last"
assert description == "Тетсовое описание"
assert project == "Рефакторинг API"
assert priority == "Low"
assert assignee == "Максим Орлов"

